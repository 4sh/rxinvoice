<div class="invoice-header grid-x">
    <a-button-default size="SMALL" visibility="LOW" (click)="goBack()" class="cell shrink">
        <i class="ion-arrow-left-c"></i>
        Retour
    </a-button-default>
    <h2 class="cell phone-16">{{invoice.buyer.name}}</h2>
    <div class="cell auto grid-x align-right">
        <select [(ngModel)]="invoice.status">
            <option value="">{{'invoice.status.all' | translate}}</option>
            <option *ngFor="let status of statuses" [ngValue]="status">
                {{'invoice.status.' + status | translate}}
            </option>
        </select>
    </div>
</div>

<form class="align-center"
      #invoiceDetailForm="ngForm">
    <div class="filterContainer grid-x grid-padding-x">
        <div class="cell phone-12 detailFilter">
            <div class="grid-x grid-padding-x">
                <div class="cell phone-12">
                    <label>{{'invoice.detail.customer' | translate}}</label>
                    <a-customer-select name="customer" [ngModel]="invoice.buyer._id"></a-customer-select>
                </div>
                <div class="cell phone-12">
                    <label>{{'invoice.detail.business' | translate}}</label>
                    <a-customer-select name="customer" [ngModel]="invoice.buyer._id"></a-customer-select>
                </div>
            </div>
            <div class="grid-x grid-padding-x">
                <div class="cell phone-20">
                    <label>{{'invoice.detail.customer.reference'|translate}}</label>
                    <input type="text" name="customerReference" [(ngModel)]="invoice.customerInvoiceRef">
                </div>
                <div class="cell phone-4 vat-block">
                    <label>{{'invoice.detail.without.vat'|translate}}</label>
                    <a-toggle name="withoutVat" [(ngModel)]="!invoice.withVAT"></a-toggle>
                </div>
            </div>
            <div>
                <label>{{'invoice.detail.object'|translate}}</label>
                <textarea type="text" name="object" [(ngModel)]="invoice.object"
                          rows="3" cols="20">
                </textarea>
            </div>
        </div>
        <div class="cell phone-12 detailFilter">
            <div class="grid-x grid-padding-x">
                <div class="cell phone-12">
                    <label>{{'invoice.detail.referenceNumber'|translate}}</label>
                    <input type="text" name="reference" [(ngModel)]="invoice.reference">
                </div>
                <div class="cell phone-12">
                    <label>{{'invoice.detail.invoice.date'|translate}}</label>
                    <a-date-picker name="invoiceDate" [(ngModel)]="invoice.date"></a-date-picker>
                </div>
            </div>
            <div class="grid-x grid-padding-x">
                <div class="cell phone-12">
                    <label>{{'invoice.detail.sent.date'|translate}}</label>
                    <a-date-picker name="sentDate" [(ngModel)]="invoice.sentDate"></a-date-picker>
                </div>
                <div class="cell phone-12">
                    <label>{{'invoice.detail.due.date'|translate}}</label>
                    <a-date-picker name="dueDate" [(ngModel)]="invoice.dueDate"></a-date-picker>
                </div>
            </div>
            <div>
                <label>{{'invoice.detail.service.kind'|translate}}</label>
                <a-service-kind-select name="kind" [(ngModel)]="invoice.kind"></a-service-kind-select>
            </div>
        </div>

    </div>
</form>

<div class="invoicing-block">
    <div class="invoicing-head">
        <div class="grid-x grid-padding-x">
            <div class="cell phone-1"></div>
            <div class="cell phone-12">{{'invoice.line.label'|translate}}</div>
            <div class="cell phone-2">{{'invoice.line.quantity'|translate}}</div>
            <div class="cell phone-3">{{'invoice.line.unit.cost'|translate}}</div>
            <div class="cell phone-3">{{'invoice.line.gross.amount'|translate}}</div>
            <div class="cell phone-2">{{'invoice.line.vat.rate'|translate}}</div>
            <div class="cell phone-1"></div>
        </div>
    </div>
    <div class="invoicing-line-block">
        <div class="invoicing-line grid-x grid-padding-x" *ngFor="let line of invoice.lines">
            <div class="cell phone-1 drag-drop-icon"><i class="fas fa-grip-horizontal"></i></div>
            <div class="cell phone-12">{{line.description}}</div>
            <div class="cell phone-2">{{line.quantity | number : '1.2'}}</div>
            <div class="cell phone-3">{{line.unitCost | invoiceCurrency}}</div>
            <div class="cell phone-3">{{line.grossAmount | invoiceCurrency}}</div>
            <div class="cell phone-2">{{line.vatRate?.rate | number: '1.2'}} {{line.vatRate?.rate ? ' %' : ''}}</div>
            <div class="cell phone-1 grid-x align-right">
                <button class="cell phone-11 action-icon delete-action">
                    <i class="far fa-trash-alt"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="invoicing-line-footer">
        <div class="grid-x grid-padding-x align-middle">
            <div class="cell phone-1"></div>
            <div class="cell phone-12">
                <input type="text" placeholder="{{'invoice.line.label'|translate}}">
            </div>
            <div class="cell phone-2">
                <input type="text" placeholder="{{'invoice.line.quantity'|translate}}">
            </div>
            <div class="cell phone-3">
                <input type="text" placeholder="{{'invoice.line.unit.cost'|translate}}">
            </div>
            <div class="cell phone-3">
                <input type="text" placeholder="{{'invoice.line.gross.amount'|translate}}">
            </div>
            <div class="cell phone-2">
                <input type="text" placeholder="{{'invoice.line.vat.rate'|translate}}">
            </div>
            <div class="cell phone-1 grid-x align-right">
                <button class="cell phone-11 action-icon validate-action">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>
    </div>
</div>


<div class="footer-invoice grid-x grid-padding-x">
    <div class="cell phone-8">
        <label>Notes</label>
        <textarea type="text"
                  rows="3" cols="20">
                </textarea>
    </div>
    <div class="cell phone-8">
        <label>Pièces jointes</label>
        <div class="import-files-invoice grid-x align-center">
            <p><i class="fas fa-cloud-upload-alt"></i>Glissez-déposez vos fichiers ou</p>
            <a-button-default visibility="MEDIUM" size="SMALL">
                Sélectionnez en un
            </a-button-default>
        </div>
    </div>
    <div class="cell phone-8 list-files">
        <label>Fichiers</label>
        <ul>
            <li>
                <span><i class="fas fa-paperclip"></i> Log de temps - Mars 2020.pdf</span>
                <i class="far fa-trash-alt"></i>
            </li>
            <li>
                <span><i class="fas fa-paperclip"></i> Log de temps - Mars 2020.pdf</span>
                <i class="far fa-trash-alt"></i>
            </li>
            <li>
                <span><i class="fas fa-paperclip"></i> Log de temps - Mars 2020.pdf</span>
                <i class="far fa-trash-alt"></i>
            </li>
            <li>
                <span><i class="fas fa-paperclip"></i> Log de temps - Mars 2020.pdf</span>
                <i class="far fa-trash-alt"></i>
            </li>
            <li>
                <span><i class="fas fa-paperclip"></i> Log de temps - Mars 2020.pdf</span>
                <i class="far fa-trash-alt"></i>
            </li>

        </ul>
    </div>
</div>